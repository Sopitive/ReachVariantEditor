<!doctype html>
<html lang="en">
   <head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<meta name="viewport" content="width=device-width">
<link rel="icon" type="image/x-icon" href="resources/favicon.ico">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script src="https://sopitive.github.io/highlightjs-rvt-script/dist/rvt-script.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
      <meta charset="UTF-8" />
      <title>Useful code snippets | ReachVariantTool Documentation</title>
      <base href="../" />
      <link rel="stylesheet" href="resources/main.css" />
      <noscript>
         <link rel="stylesheet" href="resources/noscript.css" />
      </noscript>
      <script src="resources/head.js"></script>
   </head>
   <body>
<div class="scrollbar"></div>
<div class="header">
        <button class="dropdown">
            MCC Gametypers<i class="fa fa-caret-down"></i>
            <ul class="dropdown-content">
                <a class="dropdown-item" target="_blank" href="https://discord.gg/Z2ZvPsCbcc"><li>Discord</li></a>
            </ul>
            
        </button>
        <button class="dropdown">
            The Anvil<i class="fa fa-caret-down"></i>
            <ul class="dropdown-content">
                <a class="dropdown-item" target="_blank" href="https://discord.gg/kVN58A2ydm"><li>Discord</li></a>
                <a class="dropdown-item" target="_blank" href="https://theanvil.net/forums/"><li>Forums</li></a>
                <a class="dropdown-item" target="_blank" href="https://theanvil.net/maps/"><li>Maps</li></a>
                <a class="dropdown-item" target="_blank" href="https://theanvil.net/mods/"><li>Mods</li></a>
            </ul>
            
        </button>
        <button class="dropdown">
            Halo Customs<i class="fa fa-caret-down"></i>
            <ul class="dropdown-content">
                <a class="dropdown-item" target="_blank" href="https://halocustoms.com/discord"><li>Discord</li></a>
                <a class="dropdown-item" target="_blank" href="https://halocustoms.com/maps/"><li>Maps</li></a>
                <a class="dropdown-item" target="_blank" href="https://halocustoms.com/"><li>Forums</li></a>
                <a class="dropdown-item" target="_blank" href="https://www.reddit.com/r/HaloCustoms/"><li>Reddit</li></a>
                <a class="dropdown-item" target="_blank" href="https://halocustoms.com/maps/categories/gametypes.40/"><li>Gametypes</li></a>            </ul>
            
        </button>
        <button class="dropdown">
            Halo Mods<i class="fa fa-caret-down"></i>
            <ul class="dropdown-content">
                <a class="dropdown-item" target="_blank" href="https://discord.gg/halomods"><li>Discord</li></a>
                <a class="dropdown-item" target="_blank" href="https://www.reddit.com/r/halomods/"><li>Reddit</li></a>
                
            </ul>
        </button>
        <button id="dark-mode" class="fa fa-adjust"></button>
    </div>
      <nav id="sidebar">
         <ul>
<li><a href="tools.html">Tools</a></li>
            <li><a href="index.html">Index</a></li>
            <li>
               <a>Main Window</a>
               <ul>
                  <li>
                     <a href="editor/main_window/index.html">Multiplayer</a>
                     <ul>
                        <li><a href="editor/main_window/metadata.html">Metadata</a></li>
                        <li><a href="editor/main_window/options-general.html">General Settings</a></li>
                        <li><a href="editor/main_window/options-respawn.html">Respawn Settings</a></li>
                        <li><a href="editor/main_window/options-social.html">Social Settings</a></li>
                        <li><a href="editor/main_window/options-map.html">Map and Game Settings</a></li>
                        <li data-dont-default-collapse>
                           <a href="editor/main_window/options-team.html">Team Settings</a>
                           <ul>
                              <li><a href="editor/main_window/options-team-specific.html">Individual Team Settings</a></li>
                           </ul>
                        </li>
                        <li data-dont-default-collapse>
                           <a href="editor/main_window/options-loadout.html">Loadout Settings</a>
                           <ul>
                              <li><a href="editor/main_window/options-loadout-specific.html">Individual Loadout Settings</a></li>
                           </ul>
                        </li>
                        <li><a href="editor/main_window/options-megalo.html">Script-Specific Settings</a></li>
                        <li><a href="editor/main_window/option-visibility.html">Option Visibility</a></li>
                        <li><a href="editor/main_window/tu1.html">Title Update Settings</a></li>
                        <li><a href="editor/main_window/traits.html">(all player traits)</a></li>
                        <li><a href="editor/main_window/forge.html">Forge Settings</a></li>
                     </ul>
                  </li>
                  <li>
                     <a href="editor/main_window_ff/index.html">Firefight</a>
                     <ul>
                        <li><a href="editor/main_window_ff/metadata.html">Metadata</a></li>
                        <li>
                           <a href="editor/main_window_ff/scenario.html">Firefight Settings</a>
                           <ul>
                              <li><a href="editor/main_window_ff/lives.html">Player Lives</a></li>
                              <li><a href="editor/main_window_ff/options-respawn.html">Respawn Settings</a></li>
                              <li><a href="editor/main_window_ff/round.html">Round Settings</a></li>
                              <li><a href="editor/main_window_ff/bonus-wave.html">Bonus Wave Settings</a></li>
                              <li><a href="editor/main_window_ff/custom-skull.html">Custom Skulls</a></li>
                           </ul>
                        </li>
                        <li>
                           <a>Other Settings</a>
                           <ul>
                              <li><a href="editor/main_window_ff/options-general.html">General Settings</a></li>
                              <li><a href="editor/main_window_ff/options-social.html">Social Settings</a></li>
                              <li data-dont-default-collapse>
                                 <a href="editor/main_window_ff/options-team.html">Team Settings</a>
                                 <ul>
                                    <li><a href="editor/main_window_ff/options-team-specific.html">Individual Team Settings</a></li>
                                 </ul>
                              </li>
                              <li data-dont-default-collapse>
                                 <a href="editor/main_window_ff/options-loadout.html">Loadout Settings</a>
                                 <ul>
                                    <li><a href="editor/main_window_ff/options-loadout-specific.html">Individual Loadout Settings</a></li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li><a href="editor/main_window_ff/traits.html">(all player traits)</a></li>
                        <li><a href="editor/main_window_ff/traits-wave.html">(all wave traits)</a></li>
                     </ul>
                  </li>
               </ul>
            </li>
            <li>
               <a href="editor/script_window/index.html">Script Window</a>
               <ul>
                  <li><a href="editor/script_window/meta-strings.html">Metadata Strings</a></li>
                  <li>
                     <a href="editor/script_window/string-table.html">All Other Strings</a>
                     <ul>
                        <li><a href="editor/script_window/string-localization.html">Localization</a></li>
                     </ul>
                  </li>
                  <li><a href="editor/script_window/forge-labels.html">Forge Labels</a></li>
                  <li><a href="editor/script_window/map-permissions.html">Map Permissions</a></li>
                  <li><a href="editor/script_window/player-rating-parameters.html">Player Rating Parameters</a></li>
                  <li><a href="editor/script_window/required-object-types.html">Required Object Types</a></li>
                  <li><a href="editor/script_window/script-options.html">Scripted Options</a></li>
                  <li><a href="editor/script_window/script-traits.html">Scripted Traits</a></li>
                  <li><a href="editor/script_window/script-stats.html">Scripted Stats</a></li>
                  <li><a href="editor/script_window/script-widgets.html">Scripted Widgets</a></li>
                  <li><a href="editor/script_window/gametype-code.html">Gametype Code</a></li>
               </ul>
            </li>
            <li>
               <a href="script/syntax.html">Scripting Language</a>
               <ul>
                  <li><a href="script/alias.html">Aliases</a></li>
                  <li><a href="script/events.html">Events</a></li>
                  <li><a href="script/for.html">For-each-loops</a></li>
                  <li><a href="script/if.html">If-/alt-statements</a></li>
                  <li><a href="script/operators.html">Operators</a></li>
                  <li><a href="script/string-special-chars.html">Special string characters</a></li>
                  <li><a href="script/enum.html">User-defined enums</a></li>
                  <li><a href="script/function.html">User-defined functions</a></li>
                  <li><a href="script/snippets.html">Useful code snippets</a></li>
                  <li><a href="script/declare.html">Variable declarations</a></li>
                  <li><a href="script/best-practices.html">Best practices</a></li>
               </ul>
            </li>
            <li>
               <a href="script/api/index.html">Script API reference</a>
               <ul>
                  <li data-dont-default-collapse>
                     <a>Namespaces</a>
                     <ul>
                        <li><a href="script/api/ns_unnamed.html">Content not in any namespace</a></li>
                        <li><a href="script/api/ns_enums.html">enums</a></li>
                        <li><a href="script/api/ns_game.html">game</a></li>
                        <li><a href="script/api/ns_global.html">global</a></li>
                     </ul>
                  </li>
                  <li data-dont-default-collapse>
                     <a>Types</a>
                     <ul>
                        <li data-dont-default-collapse>
                           <a>Variables</a>
                           <ul>
                              <li><a href="script/api/number.html">Number</a></li>
                              <li><a href="script/api/object.html">Object</a></li>
                              <li><a href="script/api/player.html">Player</a></li>
                              <li><a href="script/api/team.html">Team</a></li>
                              <li><a href="script/api/timer.html">Timer</a></li>
                           </ul>
                        </li>
                        <li data-dont-default-collapse>
                           <a>Misc</a>
                           <ul>
                              <li><a href="script/api/bool.html">Bool</a></li>
                              <li><a href="script/api/engine-icon.html">Engine Icon</a></li>
                              <li><a href="script/api/forge-label.html">Forge Label</a></li>
                              <li><a href="script/api/format-string.html">Format String</a></li>
                              <li><a href="script/api/incident.html">Incident</a></li>
                              <li><a href="script/api/object-type.html">Object Type</a></li>
                              <li><a href="script/api/player-set.html">Player Set</a></li>
                              <li><a href="script/api/player-traits.html">Player Traits</a></li>
                              <li><a href="script/api/sound.html">Sound</a></li>
                              <li><a href="script/api/variant-string-id.html">Variant ID</a></li>
                              <li><a href="script/api/waypoint-icon.html">Waypoint Icon</a></li>
                              <li><a href="script/api/widget.html">Widget</a></li>
                              <li><a href="script/api/widget-icon.html">Widget Icon</a></li>
                           </ul>
                        </li>
                     </ul>
                  </li>
               </ul>
            </li>
            <li>
               <a>Concepts</a>
               <ul>
                  <li><a href="concepts/bipeds-and-items.html">Bipeds and items</a></li>
                  <li><a href="concepts/firefight.html">Firefight</a></li>
               </ul>
            </li>
            <li><a href="tools.html">Tools</a></li>
</ul>
      </nav>
      <main>
         <h1>Useful code snippets</h1>
      <p>
         The following code snippets are likely to be useful when making new gametypes 
         from scratch. Note that if a code snippet requires the use of a variable, you 
         will probably have to ensure that your own script doesn't use the same variable 
         for anything important.
      </p>
      <p>
         These snippets include both "common" behaviors, which can be omitted from very 
         specialized gametypes (e.g. chess does not need to award DLC achievements for 
         kills), and "standard" behaviors, which the user would expect all gametypes to 
         have (e.g. ending the round when the round timer runs out, which, yes, you have 
         to do manually).
      </p>
      
      <ul id="toc">
         <li><a href="script/snippets.html#announce-game-start">Announce game start</a></li>
         <li><a href="script/snippets.html#dlc-achievements">DLC Achievements</a></li>
         <li><a href="script/snippets.html#loadout-palettes">Loadout palette code</a></li>
         <li><a href="script/snippets.html#red-and-blue-teams">Identifying Red and Blue Teams across rounds</a></li>
         <li><a href="script/snippets.html#moving-objects">Moving one object to another</a></li>
         <li><a href="script/snippets.html#round-timer">Round timer code (basic)</a></li>
         <li><a href="script/snippets.html#round-timer-sd">Round timer code (with Sudden Death)</a></li>
         <li><a href="script/snippets.html#super-shields">Super Shields</a></li>
         <li><a href="script/snippets.html#rotation">Pitch/Yaw Rotation</a></li>
         <li><a href="script/snippets.html#projectiles">Projectile Getter</a></li>
      </ul>

      <section>
         <h2><a name="announce-game-start">Announce game start</a></h2>
         <p>
            Most official gametypes announce their names at the start of each round. They do 
            this by <dfn>sending an incident</dfn>: they use the 
            <a href="script/api/ns_unnamed/actions/send_incident.html">send_incident</a> function 
            to tell the game that some event (such as the start of a round) has occurred. Each 
            base gametype has its own incident.
         </p>
         <pre><code>
alias announced_game_start = player.number[0]
alias announce_start_timer = player.timer[0]

declare player.announced_game_start with network priority low = 0
declare player.announce_start_timer = 5

for each player do
   if current_player.announced_game_start == 0 and current_player.announce_start_timer.is_zero() then
      send_incident(race_game_start, current_player, no_player)
      current_player.announced_game_start = 1
   end
end</code></pre>
         <p>
            In addition to announcing the game start, you may want to display explanatory 
            text at the start of the round. You can do this by calling the 
            <a href="script/api/player/actions/set_round_card_title.html">player.set_round_card_title</a> 
            function. Commonly, gametypes will display the score to win in the "round card," 
            unless the player has turned off the score limit, and this can be accomplished 
            using <a href="script/api/format-string.html">format strings</a>.
         </p>
         <pre><code>
alias announced_game_start = player.number[0]
alias announce_start_timer = player.timer[0]

declare player.announced_game_start with network priority low = 0
declare player.announce_start_timer = 5

for each player do
   if game.score_to_win != 0 then
      current_player.set_round_card_title("Collect flags for your team.\r\n%n points to win.", game.score_to_win)
   end
   if game.score_to_win == 0 then
      current_player.set_round_card_title("Collect flags for your team.")
   end
   if current_player.announced_game_start == 0 and current_player.announce_start_timer.is_zero() then
      send_incident(stockpile_game_start, current_player, no_player)
      current_player.announced_game_start = 1
   end
end</code></pre>
      </section>

      <section>
         <h2><a name="dlc-achievements">DLC Achievements</a></h2>
         <p>
            Several DLC achievements are awarded by Megalo script instead of being hardcoded 
            into the game. These include:
         </p>
         <dl>
            <dt>Dive Bomber</dt>
               <dd>Assassinate an enemy player while using a Jetpack.</dd>
            <dt>From Hell's Heart</dt>
               <dd>After being stuck with a plasma grenade, make sure that the player who 
               stuck you dies in the blast with you.</dd>
            <dt>Top Shot</dt>
               <dd>Score three headshot kills in a row without dying.</dd>
            <dt>License to Kill</dt>
               <dd>Splatter five enemy players during a single match.</dd>
            <dt>Paper Beats Rock</dt>
               <dd>Assassinate an enemy player no more than three seconds after they stop 
               using Armor Lock.</dd>
         </dl>
         <p>
            This code was taken from official gametypes. In some cases, small adjustments 
            were made in order to avoid dependencies that you can't easily copy and paste 
            (e.g. using the
            <a href="script/api/object/conditions/is_of_type.html">object.is_of_type</a> 
            condition instead of using 
            <a href="script/api/object/conditions/has_forge_label.html">object.has_forge_label</a> 
            with unnamed Forge labels, as 343i does).
         </p>
         <pre><code>
alias ach_top_shot_count        = player.number[0]
alias ach_license_to_kill_count = player.number[1]
alias ach_paper_beats_rock_vuln_timer = player.timer[0]
declare player.ach_top_shot_count        with network priority low
declare player.ach_license_to_kill_count with network priority low

for each player do <span class="comment">-- award Dive Bomber achievement as appropriate</span>
   alias killer    = global.player[0]
   alias killer_aa = global.object[0]
   alias death_mod = global.number[0]
   if current_player.killer_type_is(kill) then 
      killer    = current_player.get_killer()
      death_mod = current_player.get_death_damage_mod()
      if death_mod == enums.damage_reporting_modifier.assassination then
         killer_aa = killer.get_armor_ability()
         if killer_aa.is_of_type(jetpack) and killer_aa.is_in_use() then 
            send_incident(dlc_achieve_2, killer, killer, 65)
         end
      end
   end
end

for each player do <span class="comment">-- award From Hell's Heart achievement as appropriate</span>
   alias death_mod = global.number[0]
   alias killer    = global.player[0]
   if current_player.killer_type_is(kill) then
      death_mod = current_player.get_death_damage_mod()
      if death_mod == enums.damage_reporting_modifier.sticky then
         killer = current_player.get_killer()
         if killer.killer_type_is(suicide) then 
            send_incident(dlc_achieve_2, current_player, current_player, 68)
         end
      end
   end
end

for each player do <span class="comment">-- manage and award Top Shot achievement as appropriate</span>
   alias killer    = global.player[0]
   alias death_mod = global.number[0]
   if current_player.killer_type_is(guardians | suicide | kill | betrayal | quit) then 
      current_player.ach_top_shot_count = 0
      if current_player.killer_type_is(kill) then 
         killer    = current_player.get_killer()
         death_mod = current_player.get_death_damage_mod()
         if death_mod != enums.damage_reporting_modifier.headshot then 
            killer.ach_top_shot_count = 0
         end
         if death_mod == enums.damage_reporting_modifier.headshot then 
            killer.ach_top_shot_count += 1
         end
         if killer.ach_top_shot_count &gt; 2 then 
            send_incident(dlc_achieve_2, killer, killer, 62)
         end
      end
   end
end

for each player do <span class="comment">-- manage and award License To Kill achievement as appropriate</span>
   alias killer    = global.player[0]
   alias death_mod = global.number[0]
   if current_player.killer_type_is(kill) then 
      killer    = current_player.get_killer()
      death_mod = current_player.get_death_damage_mod()
      if death_mod == enums.damage_reporting_modifier.splatter then 
         killer.ach_license_to_kill_count += 1
         if killer.ach_license_to_kill_count &gt; 4 then 
            send_incident(dlc_achieve_2, killer, killer, 66)
         end
      end
   end
end

for each player do <span class="comment">-- manage timing for the Paper Beats Rock achievement</span>
   alias current_ability = global.object[0]
   <span class="comment">--</span>
   current_ability = current_player.get_armor_ability()
   if current_ability.is_of_type(armor_lock) and current_ability.is_in_use() then 
      current_player.ach_paper_beats_rock_vuln_timer = 3
      current_player.ach_paper_beats_rock_vuln_timer.set_rate(-100%)
   end
end
for each player do <span class="comment">-- award Paper Beats Rock achievement as appropriate</span>
   alias killer    = global.player[0]
   alias death_mod = global.number[0]
   if current_player.killer_type_is(kill) and not current_player.ach_paper_beats_rock_vuln_timer.is_zero() then 
      death_mod = current_player.get_death_damage_mod()
      if death_mod == enums.damage_reporting_modifier.assassination then
         killer = current_player.get_killer()
         send_incident(dlc_achieve_2, killer, killer, 60)
      end
   end
end</code></pre>
      </section>

      <section>
         <h2><a name="loadout-palettes">Loadout palette code</a></h2>
         <p>
            Players will not have access to any loadout palette unless you give them access 
            to loadout palettes. Standard gametypes grant players access to the Spartan Tier 
            1 and Elite Tier 1 palettes depending on their species.
         </p>
         <pre><code>
for each player do <span class="comment">-- loadout palettes</span>
   if current_player.is_elite() then 
      current_player.set_loadout_palette(elite_tier_1)
   end
   if not current_player.is_elite() then 
      current_player.set_loadout_palette(spartan_tier_1)
   end
end</code></pre>
      </section>

      <section>
         <h2><a name="red-and-blue-teams">Identifying Red and Blue Teams across rounds</a></h2>
         <p>
            As explained <a href="script/api/ns_unnamed/team.html">here</a>, Megalo scripts 
            commonly refer to teams by a number, and with each round, Red and Blue Team swap 
            their numbers. This makes it easy to implement asymmetric gametypes: you can assume 
            that <code>team[0]</code> is always Defense and <code>team[1]</code> is always 
            Offense. The thing is, what if you actually need to know which team is Red Team 
            and which is Blue Team?
         </p>
         <p>
            343 Industries' "Freeze Tag" game mode lightens players' armor colors whenever they 
            become "frozen." It does this by applying a set of player traits with a forced color, 
            but this means that Red Team and Blue Team need different traits, to force their 
            colors to pink and teal, respectively — and it means that the gametype needs 
            to know a player's team color, so that it can apply the right set of traits.
         </p>
         <pre><code>
alias red_team  = global.team[0]
alias blue_team = global.team[1]
declare red_team  with network priority high = team[0]
declare blue_team with network priority high = team[1]

on init: do
   <span class="comment">--</span>
   <span class="comment">-- We need to know which team is red and which team is blue, so we can apply the </span>
   <span class="comment">-- appropriate visuals to players that are frozen. However, that's trickier than </span>
   <span class="comment">-- you might expect: teams alternate each round, but their indices are remapped. </span>
   <span class="comment">-- On round 1, Red Team is team[0], but on round 2, it's team[1].</span>
   <span class="comment">--</span>
   global.number[2] = game.current_round
   global.number[2] %= 2
   if global.number[2] == 0 then <span class="comment">-- even-numbered round</span>
      red_team  = team[0]
      blue_team = team[1]
   end
   if global.number[2] != 0 then <span class="comment">-- odd-numbered round</span>
      red_team  = team[1]
      blue_team = team[0]
   end
end</code></pre>
      </section>

      <section>
         <h2>
            <a name="moving-objects">Moving one object to another</a>
         </h2>
         <p>
            Megalo doesn't have a "move to" function that can be used to move one object to 
            another. Instead, you must take the object to be moved, attach it to the object 
            you wish to move it to, and then detach it.
         </p>
         <pre><code>
alias subject = global.object[0]
alias target  = global.object[1]

subject.attach_to(target, 0, 0, 0, relative)
subject.detach()</code></pre>
         <p>
            When attaching an object, you can optionally provide a position offset, and you 
            can decide whether this should be relative to the target's rotation or not. This 
            can be used to fine-tune object positions:
         </p>
         <pre><code>
alias subject = global.object[0]
alias target  = global.object[1]

<span class="comment">-- Move (subject) 10.0 Forge units above (target):</span>
subject.attach_to(target, 0, 0, 100, relative)
subject.detach()</code></pre>
         <p>
            Each coordinate in the attachment offset is limited to the range [-128, 127], 
            where one unit in Forge is ten in Megalo. If you need to move an object further 
            than 12.7 Forge units away from some target, you can do so by creating a second 
            object along the way.
         </p>
         <pre><code>
alias subject   = global.object[0]
alias target    = global.object[1]
alias temporary = global.object[2]

<span class="comment">-- Move (subject) 20 Forge units (200 Megalo units) above (target), by creating</span>
<span class="comment">-- a Hill Marker 10 Forge units above (target) and moving (subject) 10 Forge</span>
<span class="comment">-- units above that marker:</span>
temporary = target.place_at_me(hill_marker, none, none, 0, 0, 100, none)
subject.attach_to(temporary, 0, 0, 100, relative)
subject.detach()
temporary.delete() <span class="comment">-- make sure to delete the temporary Hill Marker afterward!</span></code></pre>
      </section>
      
      <section>
         <h2><a name="round-timer">Round timer code (basic)</a></h2>
         <p>
            <i>Halo: Reach</i> does not automatically end the round when the round timer 
            expires. Instead, it's up to Megalo script. The round timer likely behaves this 
            way so that Invasion can use it for individual phases.
         </p>
         <pre><code>
if game.round_time_limit &gt; 0 and game.round_timer.is_zero() then
   game.end_round()
end</code></pre>
      </section>

      <section>
         <h2><a name="round-timer-sd">Round timer code (with Sudden Death)</a></h2>
         <p>
            The code for a round timer with Sudden Death is a bit more complicated.
         </p>
         <p>
            Typically, Sudden Death will activate if, at the end of the round, a player is 
            in a position where they can attempt to complete the objective. For example, 
            during CTF, Sudden Death will activate if a player is standing very close to a 
            flag that they can pick up and capture.
         </p>
         <p>
            Typically, the Grace Period is used to complement Sudden Death. 
            Sudden Death activates when a player is able to further an 
            objective match; for example, it will enable if any player is 
            standing close to a flag that they can pick up and score. In 
            that scenario, if Sudden Death begins and then the conditions 
            for it are no longer met (the player stops being near the flag), 
            then the match will end after the Grace Period ends. Sudden 
            Death never resets (if a player comes near the flag again, the 
            timer will continue from where it left off), but the Grace 
            Period does.
         </p>
         <pre><code>
alias sudden_death_enabled   = global.number[0] <span class="comment">-- set this to 1 when you want Sudden Death to be active, or 0 otherwise</span>
alias announced_sudden_death = global.number[1] <span class="comment">-- only announce the start of Sudden Death once</span>

if not game.round_timer.is_zero() then 
   game.grace_period_timer = 0
end
if game.round_time_limit &gt; 0 then 
   if not game.round_timer.is_zero() then 
      announced_sudden_death = 0
   end
   if game.round_timer.is_zero() then 
      if sudden_death_enabled == 1 then 
         game.sudden_death_timer.set_rate(-100%)
         game.grace_period_timer.reset()
         if announced_sudden_death == 0 then 
            send_incident(sudden_death, all_players, all_players)
            announced_sudden_death = 1
         end
         if game.sudden_death_time &gt; 0 and game.grace_period_timer &gt; game.sudden_death_timer then 
            game.grace_period_timer = game.sudden_death_timer
         end
      end
      if sudden_death_enabled == 0 then 
         game.grace_period_timer.set_rate(-100%)
         if game.grace_period_timer.is_zero() then 
            game.end_round()
         end
      end
      if game.sudden_death_timer.is_zero() then 
         game.end_round()
      end
   end
end</code></pre>
      </section>

      <section>
         <h2><a name="super-shields">Super Shields</a></h2>
         <p>
            Like the original <i>Halo: Combat Evolved</i>, <i>Halo: Reach</i> doesn't 
            display any extra graphics on players that have overshields. The 
            "<abbr title="Title Update">TU</abbr>" versions of many gametypes include 
            a new option called "Super Shields" which works around this, by spawning 
            fire particles on these players.
         </p>
         <pre><code>
alias opt_super_shields = script_option[12]
alias lifespan = object.timer[0]

<span class="comment">-- This should be the index of a nameless Forge label whose object type </span>
<span class="comment">-- is the fire particle emitter:</span>
alias all_fire_particles = 7

declare object.lifespan = 1

for each player do <span class="comment">-- handle super shields VFX</span>
   if opt_super_shields == 1 then 
      alias current_shields = global.number[0]
      alias outcome = global.number[1]
      <span class="comment">--</span>
      current_shields = 0
      current_shields = current_player.biped.shields
      if current_shields &gt; 100 then 
         outcome = 0
         outcome = rand(10)
         if outcome &lt;= 2 then <span class="comment">-- 30% chance to spawn a particle emitter</span>
            current_player.biped.place_at_me(particle_emitter_fire, none, never_garbage_collect, 0, 0, 0, none)
         end
      end
   end
end
for each object with label all_fire_particles do <span class="comment">-- clean up super shields VFX</span>
   current_object.lifespan.set_rate(-100%)
   if current_object.lifespan.is_zero() then 
      current_object.delete()
   end
end</code></pre>
      </section>

      <section>
         <h2><a name="rotation">Pitch/Yaw Rotation</a></h2>
         <p>
            Normally in megalo, it is not possible to use <code>face_toward</code> or <code>copy_rotation_from </code> to affect an object's pitch and yaw rotations
            consistently. This code works around that by first spawning an object, rotating it on one axis, then attaching a new object to this object before rotating the first
            object again.
         </p>
         <pre><code>
--Each temporary object below corresponds to a player, object, or global object variable. 
--You will need to set up each beforehand with the appropriate alias.
alias lookat_obj = temp_obj3
alias basis = temp_obj5
alias offset_scale = temp_num0
alias yaw_obj = temp_obj0
alias pitch_obj = temp_obj1
alias offset_obj = temp_obj2
-- yaw_obj - create a new object at basis that looks at "lookat_obj" on both pitch and yaw
-- then take a variable number offset_scale and create offset_obj at that distance forward from yaw_obj
function pitchYawRotation()
   -- place pitch and yaw objects
   pitch_obj = basis.place_between_me_and(basis, hill_marker, 0) -- currently setup as ROLL, opposed to pitch, a correction we will make in a moment
   yaw_obj = pitch_obj.place_at_me(hill_marker, none, none, 0,0,0, none)
   -- make sure the yaw object is at the center of our object, pitch already is because we used place_between(on self) for it
   yaw_obj.attach_to(basis, 0,0,0, relative)
   yaw_obj.detach()
   -- convert roll rotation to pitch via 90 degrees yaw rotation on world axis
   pitch_obj.attach_to(yaw_obj, 0,0,0, relative)
   yaw_obj.face_toward(yaw_obj,0,1,0)
   pitch_obj.detach()
   -- reorient yaw axis to how its supposed to be (-90 degrees rotation)
   yaw_obj.face_toward(yaw_obj,0,-1,0)
   -- rotate the pitch to be relative to direction (as in so its pointing towards our lookat_obj)
   pitch_obj.attach_to(yaw_obj, 0,0,0, relative)
   yaw_obj.face_toward(lookat_obj,0,0,0)
   pitch_obj.detach()
   -- setup offset object & attach-offset it in the forward direction
   offset_obj = pitch_obj.place_at_me(hill_marker, none, none, 0,0,0, none)
   offset_obj.attach_to(yaw_obj, 1,0,0, relative)
   -- apply the relative pitch rotation to our yaw axis
   yaw_obj.attach_to(pitch_obj, 0,0,0, relative) 
   pitch_obj.face_toward(lookat_obj,0,0,0)
   pitch_obj.face_toward(pitch_obj,0,-1,0)
   yaw_obj.detach()
   -- now we just do the attaching forward
   -- convert our forge units to scale units
   offset_scale *= 100
   -- set scale of yaw obj, thus scaling the attachment offset of offset_obj
   yaw_obj.set_scale(offset_scale)
   yaw_obj.copy_rotation_from(yaw_obj, true) -- update yaw_obj's scale
end
-- you will have to cleanup (delete pitch, yaw & offset objects after you're done with them)</code></pre>
      </section>

      <section>
         <h2><a name="projectiles">Projectile Getter</a></h2>
         <p>
            It isn't possible to get projectiles with a normal <code>for each object</code> loop, however, it is possible to get projectiles
            using a for each object with label loop. If you create a forge label and do not give it a name, the gametype code will loop through all
            objects on the map, including projectiles. You can then filter out the projectiles from regular objects.
         </p>

         <pre>
            <code>
alias temp_obj0 = global.object[0]
alias checkNumber = global.number[0]
alias projectileTargeted = current_object.number[0]
for each object with label 0 do
   checkNumber = 100
   temp_obj0 = current_object
   if checkNumber == 100 then
      --Filter out all objects contained in a regular object loop. Nothing in this loop will contain projectiles.
      for each object do
         if current_object == temp_obj0 then
            checkNumber = -1
         end
      end
   end
   if checkNumber == 100 then 
      --Object is a projectile
      if projectileTargeted != 1 then
         projectileTargeted = 1
         --Do something with the projectile.
      end
   end
end
            </code>
         </pre>
      </section>
   
      </main>
      <script src="resources/sidebar.js"></script>
      <script src="resources/header-links.js"></script>
   </body>
</html>